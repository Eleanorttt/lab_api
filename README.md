# Bank_API — Лабораторна 3

Невеликий навчальний REST-сервіс на Spring Boot, який імітує бекенд простого банківського застосунку.  
Проєкт показує базову авторизацію користувача і роботу з токенами (вхід, реєстрація, оновлення й вихід із системи) та перевірку доступу через кастомну анотацію й інтерцептор.

## Технології
- Java 8  
- Spring Boot 2.7 (spring-boot-starter-web)  
- Maven  
- JUnit 5 для юніт-тестів

## Основні можливості
1. **Реєстрація користувача** — `POST /auth/register` (username, password, email, birthday, phoneNumber). У разі успіху повертається токен.  
2. **Авторизація (логін)** — `POST /auth/login` (username, password). У разі успіху повертається токен.  
3. **Оновлення токена** — `POST /auth/refresh` (потрібен токен у заголовку). Повертає новий токен; старий інвалідиться.  
4. **Інвалідація токена (logout)** — `POST /auth/invalidate` (потрібен токен у заголовку). Токен додається до чорного списку.

## Робота з токенами
Ми не використовуємо сторонні JWT-бібліотеки. Токен — це **base64url(JSON)** з полями:
```json
{
  "app": "Bank_API",
  "user": "ivan",
  "role": "user",
  "iat": 1710000000,
  "exp": 1710003600,
  "id": "uuid..."
}
```
- `iat` — час створення (epoch sec), `exp` — час закінчення дії.  
- Термін дії: **1 година**.  
- Інвалідація: in-memory «чорний список» (скидається після рестарту — для навчальної роботи достатньо).


## Тести
Є юніт-тест сервісу токенів (`TokenServiceImplTest`), який перевіряє:
- токен створюється й одразу валідний;  
- `tokenData` містить очікувані поля (`user`, `app`, часові мітки);  
- після інвалідації токен стає невалідним.

## Логування
У сервісі авторизації та в інтерцепторі є прості україномовні логи через `System.out.println(...)` (вивід у консоль).  
За потреби можна писати в файл, додавши до `application.properties`:
```
logging.file.name=app.log
```
